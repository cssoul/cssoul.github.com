/**
 * Vanilla Masonry v1.0.7
 * Dynamic layouts for the flip-side of CSS Floats
 * http://vanilla-masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */

(function(j,h,g){var p=j.document;var b="classList" in p.createElement("div");function t(v){return new RegExp("(^|\\s+)"+v+"(\\s+|$)")}var c=b?function(v,w){return v.classList.contains(w)}:function(v,w){return t(w).test(v.className)};var m=b?function(v,w){v.classList.add(w)}:function(v,w){if(!c(v,w)){v.className=v.className+" "+w}};var n=b?function(v,w){v.classList.remove(w)}:function(v,w){v.className=v.className.replace(t(w)," ")};var d=p.defaultView;var f=d&&d.getComputedStyle?function(v){return d.getComputedStyle(v,null)}:function(v){return v.currentStyle};var l=p.getElementsByTagName("body")[0],o=p.createElement("div"),i=l||p.createElement("body");o.style.marginTop="1%";i.appendChild(o);var u=f(o).marginTop!=="1%";i.removeChild(o);function e(y,w,A){if(A.indexOf("%")===-1){return A}var v=y.style,z=v.width,x;v.width=A;x=w.width;v.width=z;return x}function s(B,w,K){var v=w!=="height",z=v?B.offsetWidth:B.offsetHeight,C=v?"Left":"Top",A=v?"Right":"Bottom",F=f(B),E=parseFloat(F["padding"+C])||0,D=parseFloat(F["padding"+A])||0,I=parseFloat(F["border"+C+"Width"])||0,G=parseFloat(F["border"+A+"Width"])||0,y=F["margin"+C],x=F["margin"+A],J,H;if(!u){y=e(B,F,y);x=e(B,F,x)}J=parseFloat(y)||0;H=parseFloat(x)||0;if(z>0){if(K){z+=J+H}else{z-=E+D+I+G}}else{z=F[w];if(z<0||z===null){z=B.style[w]||0}z=parseFloat(z)||0;if(K){z+=E+D+J+H+I+G}}return z}function q(x,w,v){if(x.addEventListener){x.addEventListener(w,v,false)}else{if(x.attachEvent){x["e"+w+v]=v;x[w+v]=function(){x["e"+w+v](j.event)};x.attachEvent("on"+w,x[w+v])}}}function r(x,w,v){if(x.removeEventListener){x.removeEventListener(w,v,false)}else{if(x.detachEvent){x.detachEvent("on"+w,x[w+v]);x[w+v]=null;x["e"+w+v]=null}}}function k(w,v){if(!w){return}this.element=w;this.options={};for(var x in k.defaults){this.options[x]=k.defaults[x]}for(x in v){this.options[x]=v[x]}this._create();this.build()}var a=["position","height"];k.defaults={isResizable:true,gutterWidth:0,isRTL:false,isFitWidth:false};k.prototype={_getBricks:function(w){var y;for(var x=0,v=w.length;x<v;x++){y=w[x];y.style.position="absolute";m(y,"masonry-brick");this.bricks.push(y)}},_create:function(){this.reloadItems();var y=this.element.style;this._originalStyle={};for(var z=0,w=a.length;z<w;z++){var B=a[z];this._originalStyle[B]=y[B]||""}this.element.style.position="relative";this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};var x=f(this.element),A=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(x.paddingTop)||0;this.offset.x=parseFloat(x[A])||0;this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth==="function";var v=this;setTimeout(function(){m(v.element,"masonry")});if(this.options.isResizable){q(j,"resize",function(){v._handleResize()})}},build:function(v){this._getColumns();this._reLayout(v)},_getColumns:function(){var v=this.options.isFitWidth?this.element.parentNode:this.element,w=s(v,"width");this.columnWidth=this.isFluid?this.options.columnWidth(w):this.options.columnWidth||s(this.bricks[0],"width",true)||w;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((w+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[];this._getBricks(this.element.children)},_reLayout:function(w){var v=this.cols;this.colYs=[];while(v--){this.colYs.push(0)}this.layout(this.bricks,w)},layout:function(v,K){if(!v||!v.length){return}var C,F,J,I,A,w;for(var B=0,E=v.length;B<E;B++){C=v[B];if(C.nodeType!==1){continue}F=Math.ceil(s(C,"width",true)/this.columnWidth);F=Math.min(F,this.cols);if(F===1){w=this.colYs}else{J=this.cols+1-F;w=[];for(A=0;A<J;A++){I=this.colYs.slice(A,A+F);w[A]=Math.max.apply(Math,I)}}var x=Math.min.apply(Math,w);for(var D=0,H=w.length;D<H;D++){if(w[D]===x){break}}C.style.top=(x+this.offset.y)+"px";C.style[this.horizontalDirection]=(this.columnWidth*D+this.offset.x)+"px";var G=x+s(C,"height",true),y=this.cols+1-H;for(A=0;A<y;A++){this.colYs[D+A]=G}}this.element.style.height=Math.max.apply(Math,this.colYs)+"px";if(this.options.isFitWidth){var z=0;B=this.cols;while(--B){if(this.colYs[B]!==0){break}z++}this.element.style.width=((this.cols-z)*this.columnWidth-this.options.gutterWidth)+"px"}if(K){K.call(v)}},_handleResize:function(){var v=this;function w(){v.resize();v._resizeTimeout=null}if(this._resizeTimeout){clearTimeout(this._resizeTimeout)}this._resizeTimeout=setTimeout(w,100)},resize:function(){var v=this.cols;this._getColumns();if(this.isFluid||this.cols!==v){this._reLayout()}},reload:function(v){this.reloadItems();this.build(v)},appended:function(x,A,D){var w=this,B=function(){w._appended(x,D)};if(A){var C=s(this.element,"height")+"px";for(var z=0,v=x.length;z<v;z++){x[z].style.top=C}setTimeout(B,1)}else{B()}},_appended:function(v,w){this._getBricks(v);this.layout(v,w)},destroy:function(){var y;for(var x=0,v=this.bricks.length;x<v;x++){y=this.bricks[x];y.style.position="";y.style.top="";y.style.left="";n(y,"masonry-brick")}var w=this.element.style;v=a.length;for(x=0;
x<v;x++){var z=a[x];w[z]=this._originalStyle[z]}n(this.element,"masonry");if(this.resizeHandler){r(j,"resize",this.resizeHandler)}}};k.getWH=s;j.Masonry=k})(window,undefined,Zepto);